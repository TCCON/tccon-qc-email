<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

    <!-- Fengyuan Chen's Datepicker -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datepicker/0.6.5/datepicker.min.css" integrity="sha256-b88RdwbRJEzRx95nCuuva+hO5ExvXXnpX+78h8DjyOE=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datepicker/0.6.5/datepicker.min.js" integrity="sha256-/7FLTdzP6CfC1VBAj/rsp3Rinuuu9leMRGd354hvk0k=" crossorigin="anonymous"></script>

    <style>
        .flex-container {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
        }

        .form-el {
            margin: 16px;
        }
    </style>

    <style>
        .question-grid {
            display: grid;
            grid-template-rows: auto auto;
            grid-auto-flow: column;
            margin: 1rem;
        }

        .date-grid-cell {
            grid-area: span 2 / span 1;
        }
    </style>
</head>
</head>
<body>

  {{ qcform.debug }}

  <form action="{% url 'qcform:edit' %}" method="post">
      {% csrf_token %}
      <input type="hidden" id="form_id" name="form_id" value="{{ form_id }}">
      <h2>Preface</h2>
      {% for preface in qcform.preface %}
          <table>
              {% for question in preface.questions %}
              {% for field in question.mcs %}
              <tr><th>{{ field.label }}:</th><td>{{ field }}</td></tr>
              {% endfor %}
              {% endfor %}
          </table>
      {% endfor %}

      {% for section in qcform.sections_no_preface %}
      <h2>{{ section.name }}</h2>
        {{ section.intro }}
        {% for question in section.questions %}
            <div>
                <h3>{{ question.title }}</h3>
                <p>{{ question.message }}</p>
                {% for field in question.mcs %}
                <div>
                    <p>{{ field.label }}: {{ field }}</p>
                </div>
                {% endfor %}

                {% if question.whens %}
                <div id="whens_{{question.title}}"><table>
                    <tr><th>Period</th>{% for period in question.whens %}<td>{{ forloop.counter }}</td>{% endfor %}</tr>
                    <tr><th>{% if question.whens_type == 'paired' %} Approx. start {% else %} Approx. date {% endif %}</th>
                        {% for period in question.whens %}<td>{{ period.0 }}</td>{% endfor %}</tr>
                    {% if question.whens_type == 'paired' %}
                    <tr><th>Approx. end</th>{% for period in question.whens %}<td>{{ period.1 }}</td>{% endfor %}</tr>
                    {% endif %}
                </table></div>
                {% endif %}

                {% for field in question.cmts %}
                <div id="cmts_{{question.title}}">{{field.label}}: {{field}}</div>
                {% endfor %}
            </div>
        {% endfor %}
      {% endfor %}

      <button type="submit">Save form</button>
  </form>
</body>
</html>